{"version":3,"file":"accordion.test.js","sourceRoot":"","sources":["../../../Accordion/__test__/accordion.test.tsx"],"names":[],"mappings":"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","sourcesContent":["import { render } from '@testing-library/react'\r\nimport { userEvent } from '@testing-library/user-event'\r\nimport { Accordion, AccordionItem, type AccordionProps, type AccordionItemProps } from '../../index'\r\n\r\nfunction AccordionTest(\r\n  { props, itemProps }: { props: AccordionProps, itemProps: AccordionItemProps[] }) {\r\n  return (\r\n    <Accordion {...props}>\r\n      <AccordionItem {...itemProps[0]}>\r\n        <p>Content 1</p>\r\n      </AccordionItem>\r\n      <AccordionItem {...itemProps[1]}>\r\n        <p>Content 2</p>\r\n      </AccordionItem>\r\n      <AccordionItem {...itemProps[2]}>\r\n        <p>Content 3</p>\r\n      </AccordionItem>\r\n    </Accordion>\r\n  )\r\n}\r\n\r\ndescribe('Accordion', () => {\r\n  const dataActive = '[data-active=\"true\"]'\r\n  const user = userEvent.setup()\r\n  const props = {\r\n    itemProps: [\r\n      {\r\n        title: 'Title 1',\r\n        subtitle: 'Subtitle 1',\r\n        'data-testid': 'item1',\r\n      },\r\n      {\r\n        title: 'Title 2',\r\n        subtitle: 'Subtitle 2',\r\n        'data-testid': 'item2',\r\n      },\r\n      {\r\n        title: 'Title 3',\r\n        subtitle: 'Subtitle 3',\r\n        'data-testid': 'item3',\r\n      },\r\n    ],\r\n    props: {},\r\n  }\r\n\r\n  test('Deberia renderizar correctamente', () => {\r\n    const { unmount } = render(<AccordionTest {...props} />)\r\n    expect(() => unmount()).not.toThrow()\r\n  })\r\n\r\n  test('Deberia tener los attributes de accesibilidad correctos', async () => {\r\n    const { getAllByRole } = render(<AccordionTest {...props} />)\r\n    const buttons = getAllByRole('button')\r\n    const contents = getAllByRole('region')\r\n\r\n    expect(buttons.length).toBe(3)\r\n    expect(contents.length).toBe(3)\r\n\r\n    expect(buttons[0].id).toBe(contents[0].getAttribute('aria-labelledby'))\r\n    expect(contents[0].id).toBe(buttons[0].getAttribute('aria-controls'))\r\n    expect(buttons[1].id).toBe(contents[1].getAttribute('aria-labelledby'))\r\n    expect(contents[1].id).toBe(buttons[1].getAttribute('aria-controls'))\r\n    expect(buttons[2].id).toBe(contents[2].getAttribute('aria-labelledby'))\r\n    expect(contents[2].id).toBe(buttons[2].getAttribute('aria-controls'))\r\n\r\n    expect(buttons[0].getAttribute('aria-expanded')).toBe('false')\r\n    expect(contents[0].getAttribute('aria-hidden')).toBe('false')\r\n\r\n    await user.click(buttons[0])\r\n\r\n    expect(buttons[0].getAttribute('aria-expanded')).toBe('true')\r\n    expect(contents[0].getAttribute('aria-hidden')).toBe('true')\r\n  })\r\n\r\n  test('Deberia cambiar el foco al apretar las teclas flechas', async () => {\r\n    const { getAllByRole } = render(<AccordionTest {...props} />)\r\n    const buttons = getAllByRole('button')\r\n\r\n    await buttons[0].focus()\r\n    expect(buttons[0]).toHaveFocus()\r\n\r\n    await user.keyboard('{ArrowDown}')\r\n    expect(buttons[1]).toHaveFocus()\r\n\r\n    await user.keyboard('{ArrowUp}')\r\n    expect(buttons[0]).toHaveFocus()\r\n\r\n    await user.keyboard('{ArrowUp}')\r\n    expect(buttons[0]).toHaveFocus()\r\n  })\r\n\r\n  test('No deberia poder abrir varios accordiones a la vez', async () => {\r\n    const { getAllByRole, container } = render(\r\n      <AccordionTest {...props} />,\r\n    )\r\n    const buttons = getAllByRole('button')\r\n\r\n    await user.click(buttons[0])\r\n    expect(container.querySelectorAll(dataActive).length).toBe(1)\r\n\r\n    await user.click(buttons[1])\r\n    expect(container.querySelectorAll(dataActive).length).toBe(1)\r\n\r\n    await user.click(buttons[1])\r\n    expect(container.querySelectorAll(dataActive).length).toBe(0)\r\n  })\r\n\r\n  test('Deberia poder abrir varios accordiones a la vez', async () => {\r\n    const customProps = {\r\n      props: {\r\n        multiple: true,\r\n      },\r\n      itemProps: {\r\n        ...props.itemProps,\r\n      },\r\n    }\r\n    const { getAllByRole, container } = render(<AccordionTest {...customProps} />)\r\n\r\n    const buttons = getAllByRole('button')\r\n\r\n    await user.click(buttons[0])\r\n    await user.click(buttons[1])\r\n    expect(container.querySelectorAll(dataActive).length).toBe(2)\r\n  })\r\n\r\n  test('Deberia poder controlar el estado', async () => {\r\n    let fackeState = new Set(['key2'])\r\n    const customProps = {\r\n      itemProps: [\r\n        ...props.itemProps.map((obj, i) => ({\r\n          itemKey: `key${i + 1}`,\r\n          ...obj,\r\n        })),\r\n      ],\r\n      props: {\r\n        active: fackeState,\r\n      },\r\n    }\r\n    const { getByTestId, getAllByRole } = render(<AccordionTest {...customProps} />)\r\n    expect(getByTestId('item2').getAttribute('data-active')).toBe('true')\r\n    user.click(getAllByRole('button')[1])\r\n    expect(getByTestId('item2').getAttribute('data-active')).toBe('true')\r\n  })\r\n})\r\n"]}